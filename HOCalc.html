<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Homeoffice-Rechner by CG</title>
    <style>
        @media screen and (max-width: 600px) {
            body {
                padding: 5px;
                font-size: 14px;
            }
            table {
                font-size: 12px;
                width: 100%;
            }
            th, td {
                padding: 4px 2px;
            }
            input[type="number"], select {
                width: 40px;
                padding: 1px;
                font-size: 12px;
            }
            .percentage-dropdown {
                width: 60px; 
            }
            h1 {
                font-size: 20px;
                margin: 10px 0;
            }
        }

        @media screen and (min-width: 601px) {
            table {
                width: auto;
                margin: 0 auto;
            }
            body {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            input[type="number"], select {
                width: 60px;
                background-color: #444;
                color: #fff;
                border: 1px solid #555;
                padding: 2px 2px;
            }
            .percentage-dropdown {
                width: 60px;
            }
        }

        body {
            font-family: system-ui, Arial, sans-serif;
            line-height: 1.4;
            padding: 10px;
            background-color: #333333;
            color: #ffffff;
            max-width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
        }

        table {
            border-collapse: collapse;
            margin-bottom: 15px;
            border: 1px solid #555;
        }

        td {
            padding: 6px;
            text-align: left;
            white-space: normal;
        }

        th {
            font-weight: bold;
            padding: 6px;
            text-align: left;
            white-space: normal;
            background-color: #444;
        }

        input[type="number"], select {
            max-width: 100%;
            background-color: #444;
            color: #fff;
            border: 1px solid #555;
            padding: 2px 2px;
        }
    
        .result { font-weight: bold; }
        #resultsTable td:not(:first-child) {
            text-align: left;
        }

        .total-column {
            font-weight: bold;
            background-color: #444;
        }
    </style>
</head>
<body>
    <h1>Homeoffice-Rechner</h1>
    <table>
        <tr>
            <th></th>
            <th>Monat 1</th>
            <th>Monat 2</th>
            <th></th>
        </tr>
        <tr>
            <td>Teletage (Arbeitstage)</td>
            <td><input type="number" id="workDays1" placeholder="0" step="1" min="0"></td>
            <td><input type="number" id="workDays2" placeholder="0" step="1" min="0"></td>
            <td id="totalWorkDays" class="total-column"></td>
        </tr>
        <tr>
            <td>Pr채senzstunden</td>
            <td><input type="number" id="prHours1" placeholder="0" step="0.01" min="0"></td>
            <td><input type="number" id="prHours2" placeholder="0" step="0.01" min="0"></td>
            <td id="totalPrHours" class="total-column"></td>
        </tr>
        <tr>
            <td>Telestunden</td>
            <td><input type="number" id="telHours1" placeholder="0" step="0.01" min="0"></td>
            <td><input type="number" id="telHours2" placeholder="0" step="0.01" min="0"></td>
            <td id="totalTelHours" class="total-column"></td>
        </tr>
        <tr></tr>
            <td class="total-column"></td>
            <td type="number" id="totalHoursMonth1" class="total-column"></td>
            <td type="number" id="totalHoursMonth2" class="total-column"></td>
            <td id="totalHours" class="total-column"></td>
        </tr>
    </table>


    <table>
        <tr>
            <th colspan="2">Grundwerte</th>
        </tr>
        <tr>
            <td>t채gl. Regelarbeitszeit</td>
            <td><input type="number" id="dailyHours" value="8.01" step="0.01" min="0"></td>
        </tr>
        <tr>
            <td>Teleanteil in %</td>
            <td>
                <select id="homeOfficePercent" class="percentage-dropdown">
                    <option value="60">60%</option>
                    <option value="80">80%</option>
                </select>
            </td>
        </tr>
    </table>
    
    <table id="resultsTable">
        <tr>
            <th></th>
            <th>Monat 1</th>
            <th>Monat 2</th>
            <th>Monat 1+2</th>
        </tr>
        <!-- Results will be inserted here by JavaScript -->
    </table>
    
    <script>
        function calculateHours() {
            // Inputs abrufen
            const workDays1 = parseFloat(document.getElementById('workDays1').value) || 0;
            const workDays2 = parseFloat(document.getElementById('workDays2').value) || 0;
            const prHours1 = parseFloat(document.getElementById('prHours1').value) || 0;
            const prHours2 = parseFloat(document.getElementById('prHours2').value) || 0;
            const telHours1 = parseFloat(document.getElementById('telHours1').value) || 0;
            const telHours2 = parseFloat(document.getElementById('telHours2').value) || 0;
            const dailyHours = parseFloat(document.getElementById('dailyHours').value) || 8.01;
            const homeOfficePercent = parseFloat(document.getElementById('homeOfficePercent').value);
            const officePercent = 100 - homeOfficePercent;
    
            // Summen
            const totalWorkDays = workDays1 + workDays2;
            const totalPrHours = prHours1 + prHours2;
            const totalTelHours = telHours1 + telHours2;
            const totalHoursMonth1 = telHours1 + prHours1;
            const totalHoursMonth2 = telHours2 + prHours2;
            const totalHours = totalHoursMonth1 + totalHoursMonth2;
    
            // Gesamtspalte in Tab1 updaten
            document.getElementById('totalWorkDays').textContent = formatNumber(totalWorkDays);
            document.getElementById('totalPrHours').textContent = formatNumber(totalPrHours);
            document.getElementById('totalTelHours').textContent = formatNumber(totalTelHours);
            document.getElementById('totalHoursMonth1').textContent = formatNumber(totalHoursMonth1);
            document.getElementById('totalHoursMonth2').textContent = formatNumber(totalHoursMonth2);
            document.getElementById('totalHours').textContent = formatNumber(totalHours);
                
            // Erwartungswerte
            const expectedTotalHours1 = workDays1 * dailyHours;
            const expectedTotalHours2 = workDays2 * dailyHours;
            const expectedTotalHours = totalWorkDays * dailyHours;
            
            const expectedOfficeHours1 = prHours1 / totalHoursMonth1 *100 || 0;
            const expectedOfficeHours2 = prHours2 / totalHoursMonth2 *100 || 0;
            const expectedOfficeHours = expectedTotalHours * (officePercent / 100);
            
            const expectedHomeHours1 = telHours1 / totalHoursMonth1 *100 || 0;
            const expectedHomeHours2 = telHours2 / totalHoursMonth2 *100 || 0;
            const expectedHomeHours = expectedTotalHours * (homeOfficePercent / 100);
    
            // Abweichungen
            const homeOfficeDays = expectedHomeHours / dailyHours || 0;

            const diffHomeHours1 = telHours1 - expectedHomeHours;
            const diffHomeHours2 = telHours2 - expectedHomeHours;
            const diffHomeHours = totalTelHours - expectedHomeHours;
    
            // Dezimalzeichen ersetzen
            function formatNumber(num) {
                return num.toFixed(2).replace('.', ',');
            }

            const resultsHtml = `
                <tr>
                    <td>Gesamtanwesenheit</td>
                    <td>${formatNumber(expectedTotalHours1)}h</td>
                    <td>${formatNumber(expectedTotalHours2)}h</td>
                    <td class="total-column">${formatNumber(expectedTotalHours)}h</td>
                </tr>
                <tr>
                    <td>Pr채senz (${officePercent}%)</td>
                    <td>${formatNumber(expectedOfficeHours1)}%</td>
                    <td>${formatNumber(expectedOfficeHours2)}%</td>
                    <td class="total-column">${formatNumber(expectedOfficeHours)}h</td>
                </tr>
                <tr>
                    <td>Homeoffice (${homeOfficePercent}%)</td>
                    <td>${formatNumber(expectedHomeHours1)}%</td>
                    <td>${formatNumber(expectedHomeHours2)}%</td>
                    <td class="total-column">${formatNumber(expectedHomeHours)}h</td>
                </tr>
                <tr>
                    <td>Differenz zu regul채r</td>
                    <td>${formatNumber(diffHomeHours1)}h</td>
                    <td>${formatNumber(diffHomeHours2)}h</td>
                    <td class="total-column">${formatNumber(diffHomeHours)}h</td>
                </tr>
                <tr class="total-column">
                    <td>Anzahl Teletage</td>
                    <td></td>
                    <td></td>
                    <td>${formatNumber(homeOfficeDays)} Tage</td>
                </tr>
            `;
    
            document.getElementById('resultsTable').innerHTML = `
                <tr>
                    <th></th>
                    <th>Monat 1</th>
                    <th>Monat 2</th>
                    <th>Monat 1+2</th>
                </tr>
                ${resultsHtml}
            `;
        }
    
        // Eventlistener fuer Inputs
        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('input', calculateHours);
        });
    
        // Berechnung beim ersten Aufruf
        calculateHours();
    </script>
</body>
</html>